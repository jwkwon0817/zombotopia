name: Deploy to Server

on:
   push:
      branches: [ main ]

jobs:
   deploy:
      runs-on: self-hosted
      defaults:
         run:
            working-directory: /home/sunrintoday/projects/zombotopia

      steps:
         - name: Pull latest changes
           run: git pull origin main
                        
         - name: Restart Docker containers
           run: |
             docker compose down api
             docker compose up -d --build api
